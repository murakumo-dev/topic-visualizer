# Topic Visualizer

リアルタイムで複数ユーザーが話題を泡として飛ばせる、ビジュアライザーWebアプリです。

---

## 必要なもの

- Windows 11 のパソコン
- インターネット接続（初回セットアップのみ）

---

## セットアップ手順

### ステップ 1：Node.js をインストールする

1. ブラウザで **https://nodejs.org** を開く
2. **「LTS」** と書かれた緑のボタンをクリックしてインストーラーをダウンロード
3. ダウンロードした `.msi` ファイルをダブルクリックして実行
4. すべて「Next」で進めてインストール完了

**インストールの確認：**

`Win + R` を押して `cmd` と入力し Enter。コマンドプロンプトが開いたら：

```
node -v
```

`v22.x.x` のようなバージョン番号が表示されれば成功です。

---

### ステップ 2：プロジェクトフォルダを作る

コマンドプロンプトで以下を順番に実行してください：

```
mkdir C:\topic-visualizer
cd C:\topic-visualizer
mkdir public
```

---

### ステップ 3：ファイルを配置する

ダウンロードした 3 つのファイルを以下の構成になるように配置してください：

```
C:\topic-visualizer\
├── server.js
├── package.json
└── index.html
```

Windowsのエクスプローラーで `C:\topic-visualizer` を開き、ドラッグ＆ドロップで配置できます。

---

### ステップ 4：必要なライブラリをインストールする

コマンドプロンプトで（`C:\topic-visualizer` フォルダにいる状態で）：

```
npm install
```

`node_modules` フォルダが自動で作成されたら完了です。

---

### ステップ 5：サーバーを起動する

```
node server.js
```

以下のメッセージが表示されれば起動成功です：

```
Topic Visualizer running at http://localhost:3000
```

ブラウザで **http://localhost:3000** を開いて動作を確認してください。

サーバーを停止するときは `Ctrl + C` を押してください。

---

## ネットワークへの公開

### 同じ Wi-Fi 内のスマホ・他のPCからアクセスする

**① 自分のIPアドレスを調べる**

新しいコマンドプロンプトを開いて：

```
ipconfig
```

`IPv4 アドレス` の行に表示される数字（例：`192.168.1.5`）をメモしてください。

**② Windowsファイアウォールでポート 3000 を開ける**

1. スタートメニューで「**Windows Defender ファイアウォール**」を検索して開く
2. 左側の「**詳細設定**」をクリック
3. 「**受信の規則**」→「**新しい規則**」をクリック
4. 「**ポート**」を選択して Next
5. 「**TCP**」・「**特定のローカルポート**」に `3000` を入力して Next
6. 「**接続を許可する**」を選択して Next
7. 3つのチェックをすべてオンにして Next
8. 名前を `topic-visualizer` として完了

**③ アクセスする**

同じ Wi-Fi に接続しているスマホや他のPCのブラウザで：

```
http://192.168.1.5:3000
```

（`192.168.1.5` の部分は①で調べた自分のIPアドレスに置き換えてください）

---

### インターネット全体に公開する（Railway を使う場合）

自宅の Wi-Fi 外からもアクセスできるようにする方法です。

1. **https://github.com** でアカウントを作成し、`topic-visualizer` という新しいリポジトリを作る
2. `server.js`・`package.json`・`public/index.html` の 3 ファイルをリポジトリにアップロード
3. **https://railway.app** にアクセスし、GitHubアカウントでログイン
4. 「**New Project**」→「**Deploy from GitHub repo**」で上記リポジトリを選択
5. デプロイが完了すると `https://xxxx.up.railway.app` のような URL が発行される

その URL を共有すれば、世界中からアクセスできます。

---

## 使い方

| 操作 | 内容 |
|---|---|
| テキストを入力して Enter または ➤ボタン | 泡を飛ばす |
| 右上の 👁 ボタン | 見るモード（UIを非表示にして泡だけ表示） |
| 見るモード中に ✏️ ボタン | 入力モードに戻る |
| 右上の 🕐 ボタン | 履歴パネルを開く（過去の泡を時刻付きで確認） |

- 接続中のユーザー数が左上にリアルタイムで表示されます
- 複数人が同時に接続すると、お互いの泡が全員の画面に流れます
- 履歴パネルを閉じている間に新しい泡が届くと、バッジで件数が表示されます

---

## コマンドまとめ

| やること | コマンド |
|---|---|
| ライブラリのインストール（初回のみ） | `npm install` |
| サーバーの起動 | `node server.js` |
| サーバーの停止 | `Ctrl + C` |

> **ヒント：** サーバーを起動したままパソコンがスリープすると接続が切れます。  
> 「電源とスリープの設定」でスリープを**オフ**にしておくことをおすすめします。
